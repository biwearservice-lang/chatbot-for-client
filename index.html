<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Chatbot</title>
</head>
<body>

<h1 id="title">Loading...</h1>

<script>
  const params = new URLSearchParams(window.location.search);
  const company_name = params.get("company") || "Default Company";
  const user_name = params.get("name") || "there";

  document.title = `Hey ${user_name}, here is the chatbot for you`;
  document.getElementById("title").innerText =
    `Hey ${user_name}, here is the chatbot for you`;

  (function(d, t) {
    var v = d.createElement(t), s = d.getElementsByTagName(t)[0];
    v.onload = function() {
      window.voiceflow.chat.load({
        verify: { projectID: "6962863ea3c28a27fd60ce69" },
        url: "https://general-runtime.voiceflow.com",
        versionID: "production",
        launch: {
          event: {
            type: "launch",
            payload: {
              company_name: company_name,
              user_name: user_name
            }
          }
        }
      });
    };
    v.src = "https://cdn.voiceflow.com/widget/bundle.mjs";
    v.type = "text/javascript";
    s.parentNode.insertBefore(v, s);
  })(document, "script");
</script>

</body>
</html>
